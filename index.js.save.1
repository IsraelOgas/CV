const express = require('express'); const bodyParser = 
require('body-parser'); const path = require('path'); const app = 
express();

const mongoose = require('mongoose'); const Schema = mongoose.Schema;


const MongoClient = require('mongodb').MongoClient; const test = 
require('assert'); // Connection url const url = 'mongodb://localhost/'; 
// Database Name const dbName = 'almacenamiento'; // Connect using 
MongoClient


// realizando conexion con la bd 
//mongoose.connect('mongodb://localhost/almacenamiento');

var usuariosSchemaJSON = {
    nombre: String,
    rut: String,
    edad: Number
};

// Creando Schema var usuarioSchema = new Schema(usuariosSchemaJSON);

// Creando modelo var Usuario = mongoose.model("Usuario",usuarioSchema);


app.use(bodyParser.urlencoded({extended: false })); 
app.use(bodyParser.json());

// ruta de la pagina HOME app.get('/', (req, res) => res.send('Hello 
World!'));

// ruta de la pagina CONTACTO app.get('/contacto', (req, res) => 
res.send('Esta es la paginita de contactos'));

// ruta de la pagina HOLA app.get('/hola', (req, res) => res.send('Esta 
es la paginita que te SALUDA!'));

// ruta de la pagina CV app.use(express.static('assets')); 
app.get('/CV', (req, res) => res.sendFile(path.join(__dirname , 
'assets/index.html')));

app.get('/list', (req, res) => {
    Usuario.find((err, result) => {
        console.log(result);
        res.send(result);
    });
});

app.post('/usuarios', (req, res) => {
    var usuario = new Usuario({nombre: req.body.nombre, rut: 
req.body.rut, edad: req.body.edad});
    user.save(() => {
        res.send("Datos Guardados");
    });
});


app.listen('80',() =>{
    console.log('Servidor iniciado en el puerto 80');
});

